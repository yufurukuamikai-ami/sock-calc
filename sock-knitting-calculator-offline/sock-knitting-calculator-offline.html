<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>é´ä¸‹ç·¨ã¿è¨ˆç®—æ©Ÿï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç‰ˆï¼‰</title>
  <style>
    :root{
      --bg1:#fff1f2; /* pink-50 */
      --bg2:#faf5ff; /* purple-50 */
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --border:#d1d5db;
      --accent1:#7c3aed; /* purple-600 */
      --accent2:#db2777; /* pink-600 */
      --shadow: 0 10px 30px rgba(17,24,39,.12);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", "Meiryo", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg1), transparent 60%),
                  radial-gradient(1200px 800px at 90% 20%, var(--bg2), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
      padding:16px;
    }

    .wrap{max-width:900px;margin:0 auto;}
    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:20px;
      margin-bottom:16px;
    }

    .header{display:flex;align-items:center;gap:12px;margin-bottom:16px;}
    .icon{
      width:36px;height:36px;flex:0 0 auto;
      color:var(--accent1);
    }
    h1{font-size:28px;line-height:1.2;margin:0;}
    h2{font-size:22px;margin:0 0 10px;}

    .grid{display:grid;grid-template-columns:1fr;gap:12px;}
    @media (min-width:760px){ .grid{grid-template-columns:1fr 1fr;} }

    label{display:block;font-size:13px;font-weight:600;color:#374151;margin:0 0 6px;}
    .hint{font-size:12px;color:var(--muted);font-weight:500;margin-left:8px;}

    input[type="number"], select{
      width:100%;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:12px;
      font-size:16px;
      outline:none;
      background:#fff;
    }
    input[type="number"]:focus, select:focus{
      border-color:rgba(124,58,237,.55);
      box-shadow: 0 0 0 3px rgba(124,58,237,.18);
    }

    .row{display:flex;gap:16px;flex-wrap:wrap;align-items:center;}
    .radio, .check{display:flex;align-items:center;gap:8px;font-size:14px;}
    .radio input, .check input{transform: scale(1.1);}

    .divider{border-top:1px solid #e5e7eb;margin:14px 0 0;padding-top:14px;}

    .btn{
      width:100%;
      border:none;
      border-radius:14px;
      padding:14px 16px;
      font-size:18px;
      font-weight:800;
      color:#fff;
      cursor:pointer;
      background: linear-gradient(90deg, var(--accent1), var(--accent2));
      box-shadow: 0 12px 25px rgba(124,58,237,.20);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform: translateY(-1px); filter: brightness(1.02);}
    .btn:active{transform: translateY(0px) scale(.99);}

    .box{border-radius:14px;padding:14px;margin-top:12px;}
    .b-indigo{background:#eef2ff;}
    .b-orange{background:#fff7ed;}
    .b-green{background:#f0fdf4;}
    .b-pink{background:#fdf2f8;}
    .b-purple{background:#faf5ff;}
    .b-blue{background:#eff6ff;}
    .b-gray{background:#f3f4f6;}

    .box h3{margin:0 0 8px;font-size:16px;}
    .box p{margin:6px 0;color:#374151;}

    .big{font-weight:900;font-size:22px;}
    .accent-indigo{color:#4f46e5;}
    .accent-orange{color:#ea580c;}
    .accent-green{color:#16a34a;}
    .accent-pink{color:#db2777;}
    .accent-purple{color:#7c3aed;}
    .accent-blue{color:#2563eb;}

    .muted{color:var(--muted);font-size:12px;}

    .customGaugeWrap{display:none;margin-top:10px;}

    .footerNote strong{font-weight:900;}

    .topRight{
      font-size:12px;
      color:var(--muted);
      margin-top:6px;
    }
  </style>
</head>
<body>
  <div class="wrap">

    <div class="card">
      <div class="header">
        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M8 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M16 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M7 4h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M5 6h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2"/>
          <path d="M7.5 10.5h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M13.5 10.5h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M7.5 14.5h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M13.5 14.5h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M7.5 18.5h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M13.5 18.5h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <div>
          <h1>é´ä¸‹ç·¨ã¿è¨ˆç®—æ©Ÿ</h1>
          <div class="topRight">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä½¿ãˆã‚‹å˜ä½“HTMLç‰ˆï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§å‹•ãã¾ã™ï¼‰</div>
        </div>
      </div>

      <div class="grid">
        <div>
          <label for="footLength">è¶³ã®é•·ã•ï¼ˆcmï¼‰</label>
          <input id="footLength" type="number" min="10" max="35" step="0.5" value="24" />
        </div>
        <div>
          <label for="ankleCirc">è¶³é¦–å‘¨ã‚Šï¼ˆcmï¼‰</label>
          <input id="ankleCirc" type="number" min="10" max="40" step="0.5" value="20" />
        </div>

        <div>
          <label for="cuffLength">å±¥ãå£ã®é•·ã•ï¼ˆcmï¼‰</label>
          <input id="cuffLength" type="number" min="1" max="30" step="0.5" value="6" />
          <div class="muted" style="margin-top:6px;">â€»ã‚´ãƒ ç·¨ã¿éƒ¨åˆ†ã®é•·ã•ã®ç›®å®‰ï¼ˆãŠå¥½ã¿ã§å¤‰æ›´OKï¼‰</div>
        </div>

        <div>
          <label for="yarnWeight">æ¯›ç³¸ã®å¤ªã• <span id="stdGaugeHint" class="hint"></span></label>
          <select id="yarnWeight">
            <option value="jumbo">è¶…æ¥µå¤ª</option>
            <option value="super-bulky">æ¥µå¤ª</option>
            <option value="bulky">ä¸¦å¤ª</option>
            <option value="medium">åˆå¤ª</option>
            <option value="light">ä¸­ç´°</option>
            <option value="fine">åˆç´°</option>
            <option value="super-fine" selected>æ¥µç´° - é´ä¸‹ç”¨</option>
            <option value="ultra-fine">è¶…æ¥µç´°ãƒ»ãƒ¬ãƒ¼ã‚¹ç³¸</option>
          </select>
          <div class="muted" id="needleRangeHint" style="margin-top:6px;"></div>
        </div>

        <div>
          <label for="needleSize">ç·¨ã¿é‡ã®ã‚µã‚¤ã‚ºï¼ˆå·ï¼‰</label>
          <select id="needleSize">
            <option value="0">0å· (2.0mm)</option>
            <option value="1">1å· (2.1mm)</option>
            <option value="2">2å· (2.3mm)</option>
            <option value="2.5" selected>2.5å· (2.5mm)</option>
            <option value="3">3å· (2.7mm)</option>
            <option value="4">4å· (3.0mm)</option>
            <option value="5">5å· (3.3mm)</option>
            <option value="6">6å· (3.6mm)</option>
            <option value="7">7å· (3.9mm)</option>
            <option value="8">8å· (4.2mm)</option>
            <option value="9">9å· (4.5mm)</option>
            <option value="10">10å· (4.8mm)</option>
            <option value="12">12å· (5.4mm)</option>
            <option value="15">15å· (6.6mm)</option>
          </select>
        </div>
      </div>

      <div style="margin-top:10px;">
        <label>é´ä¸‹ã®å½¢</label>
        <div class="row">
          <label class="radio"><input type="radio" name="sockType" value="standard" checked /> æ¨™æº–</label>
          <label class="radio"><input type="radio" name="sockType" value="utsubo" /> ã‚¦ãƒ„ãƒœã‚½ãƒƒã‚¯ã‚¹ï¼ˆç­’å‹ï¼‰</label>
        </div>
      </div>

      <div style="margin-top:10px;">
        <label>ç·¨ã¿æ–¹</label>
        <div class="row">
          <label class="radio"><input type="radio" name="method" value="toe" checked /> ã¤ã¾å…ˆã‹ã‚‰</label>
          <label class="radio"><input type="radio" name="method" value="cuff" /> å±¥ãå£ã‹ã‚‰</label>
        </div>
      </div>

      <div class="divider">
        <label class="check"><input id="useCustomGauge" type="checkbox" /> å®Ÿéš›ã®ã‚²ãƒ¼ã‚¸ã‚’æ¸¬ã£ã¦å…¥åŠ›ã™ã‚‹ï¼ˆã‚ˆã‚Šæ­£ç¢ºï¼‰</label>

        <div id="customGaugeWrap" class="customGaugeWrap">
          <div class="box b-blue">
            <div class="muted" style="margin-bottom:10px;">è©¦ã—ç·¨ã¿ã§æ¸¬å®šã—ãŸã‚²ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>
            <div class="grid">
              <div>
                <label for="gauge10cm">ã‚²ãƒ¼ã‚¸ 10cm = ç›®æ•°</label>
                <input id="gauge10cm" type="number" min="10" max="50" value="28" />
              </div>
              <div>
                <label for="rowGauge10cm">ã‚²ãƒ¼ã‚¸ 10cm = æ®µæ•°</label>
                <input id="rowGauge10cm" type="number" min="10" max="60" value="36" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="margin-top:16px;">
        <button id="calcBtn" class="btn">ğŸ“Š è¨ˆç®—ã™ã‚‹</button>
      </div>
    </div>

    <div id="resultCard" class="card" style="scroll-margin-top:12px;">
      <h2>ç·¨ã¿å›³ã®è¨ˆç®—çµæœ</h2>

      <div class="box b-indigo">
        <h3 class="accent-indigo">ğŸ“ ä½¿ç”¨ã™ã‚‹é“å…·</h3>
        <p>æ¯›ç³¸ï¼š<span id="outYarnName" class="big accent-indigo"></span></p>
        <p>ç·¨ã¿é‡ï¼š<span id="outNeedle" class="big accent-indigo"></span></p>
        <p>ã‚²ãƒ¼ã‚¸ï¼š<span id="outGauge" class="big accent-indigo"></span> <span id="outGaugeTag" class="muted"></span></p>
        <p>é´ä¸‹ã®å½¢ï¼š<span id="outSockType" class="big accent-indigo"></span></p>
        <p class="muted">â€»è¼ªé‡ã¾ãŸã¯5æœ¬é‡ã‚’ã”ä½¿ç”¨ãã ã•ã„</p>
      </div>

      <div id="outSteps"></div>

      <div class="box b-gray footerNote" style="margin-top:16px;">
        <p class="muted">ğŸ’¡ <strong>ãƒ’ãƒ³ãƒˆï¼š</strong>ã“ã®è¨ˆç®—ã¯ç›®å®‰ã§ã™ã€‚å®Ÿéš›ã®ã‚²ãƒ¼ã‚¸ã‚„å¥½ã¿ã«å¿œã˜ã¦å¾®èª¿æ•´ã—ã¦ãã ã•ã„ã€‚è©¦ã—ç·¨ã¿ã‚’ã—ã¦ã‚²ãƒ¼ã‚¸ã‚’æ­£ç¢ºã«æ¸¬ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
      </div>
    </div>

  </div>

  <script>
    const yarnGauges = {
      'ultra-fine': { stitches: 32, rows: 42, needle: '0', name: 'è¶…æ¥µç´°ï¼ˆãƒ¬ãƒ¼ã‚¹ç³¸ï¼‰', needleRange: '0ã€œ2å·' },
      'super-fine': { stitches: 28, rows: 36, needle: '2', name: 'æ¥µç´°ï¼ˆé´ä¸‹ç”¨ãªã©ï¼‰', needleRange: '1ã€œ3å·' },
      'fine': { stitches: 24, rows: 32, needle: '3', name: 'åˆç´°', needleRange: '2ã€œ4å·' },
      'light': { stitches: 22, rows: 28, needle: '4', name: 'ä¸­ç´°', needleRange: '3ã€œ5å·' },
      'medium': { stitches: 20, rows: 26, needle: '5', name: 'åˆå¤ª', needleRange: '4ã€œ6å·' },
      'bulky': { stitches: 18, rows: 24, needle: '7', name: 'ä¸¦å¤ª', needleRange: '6ã€œ8å·' },
      'super-bulky': { stitches: 14, rows: 20, needle: '9', name: 'æ¥µå¤ª', needleRange: '8ã€œ10å·' },
      'jumbo': { stitches: 10, rows: 14, needle: '12', name: 'è¶…æ¥µå¤ª', needleRange: '10ã€œ15å·' }
    };

    const needleMmMap = {
      '0': '2.0', '1': '2.1', '2': '2.3', '2.5': '2.5',
      '3': '2.7', '4': '3.0', '5': '3.3', '6': '3.6',
      '7': '3.9', '8': '4.2', '9': '4.5', '10': '4.8',
      '12': '5.4', '15': '6.6'
    };

    const $ = (id) => document.getElementById(id);

    function getRadioValue(name){
      const el = document.querySelector(`input[name="${name}"]:checked`);
      return el ? el.value : '';
    }

    function setHints(){
      const yarnWeight = $('yarnWeight').value;
      const useCustom = $('useCustomGauge').checked;
      const g = yarnGauges[yarnWeight];

      $('needleRangeHint').textContent = useCustom ? '' : `æ¨å¥¨ç¯„å›²: ${g.needleRange}`;
      $('stdGaugeHint').textContent = useCustom ? '' : `(æ¨™æº–ã‚²ãƒ¼ã‚¸: 10cm = ${g.stitches}ç›® Ã— ${g.rows}æ®µ)`;

      // yarn select disabled when custom gauge
      $('yarnWeight').disabled = useCustom;
      $('customGaugeWrap').style.display = useCustom ? 'block' : 'none';
    }

    function clampNum(v, min, max){
      if (Number.isNaN(v)) return min;
      return Math.max(min, Math.min(max, v));
    }

    function compute(){
      const footLength = clampNum(parseFloat($('footLength').value), 10, 35);
      const ankleCirc = clampNum(parseFloat($('ankleCirc').value), 10, 40);
      const cuffLength = clampNum(parseFloat($('cuffLength').value), 1, 30);
      const yarnWeight = $('yarnWeight').value;
      const useCustom = $('useCustomGauge').checked;
      const gauge10cm = clampNum(parseFloat($('gauge10cm').value), 10, 50);
      const rowGauge10cm = clampNum(parseFloat($('rowGauge10cm').value), 10, 60);
      const needleSize = $('needleSize').value;
      const method = getRadioValue('method');
      const sockType = getRadioValue('sockType');

      const currentGauge = useCustom
        ? { stitches: gauge10cm, rows: rowGauge10cm }
        : { stitches: yarnGauges[yarnWeight].stitches, rows: yarnGauges[yarnWeight].rows };

      const stitchesPerCm = currentGauge.stitches / 10;
      const rowsPerCm = currentGauge.rows / 10;

      // ä½œã‚Šç›®ï¼ˆ4ã®å€æ•°ï¼‰
      const castOn = Math.round((ankleCirc * stitchesPerCm) / 4) * 4;

      // ã‚¦ãƒ„ãƒœã‚½ãƒƒã‚¯ã‚¹
      const isUtsubo = sockType === 'utsubo';
      const utsuboAnkleCirc = isUtsubo ? ankleCirc * 0.7 : ankleCirc;
      const utsuboCastOn = isUtsubo ? Math.round((utsuboAnkleCirc * stitchesPerCm) / 4) * 4 : castOn;

      const totalSt = isUtsubo ? utsuboCastOn : castOn;

      // ã¤ã¾å…ˆï¼ˆtoe-upï¼‰ã®é–‹å§‹ä½œã‚Šç›®ã¯å¶æ•°ã«æƒãˆã‚‹
      let toeCastOnStart = Math.round(totalSt / 4);
      if (toeCastOnStart % 2 !== 0) toeCastOnStart += 1;

      // ã‹ã‹ã¨é–¢é€£
      const heelStitches = totalSt / 2;
      const heelFlapRows = Math.round(heelStitches);
      const heelTurnRows = Math.round(heelStitches / 3);

      // è¶³ã®ç”²
      const footLength67 = footLength * 0.67;
      const footRows = Math.round(footLength67 * rowsPerCm);
      const footCm = Math.round(footLength67); // è¡¨ç¤ºç”¨ï¼ˆç´„â—‹cmï¼‰

      // å±¥ãå£ï¼ˆé•·ã•ï¼‰
      const cuffRows = Math.max(1, Math.round(cuffLength * rowsPerCm));
      const cuffCm = Math.max(1, Math.round(cuffRows / rowsPerCm));

      // ã¤ã¾å…ˆ
      const toeRows = Math.round(5 * rowsPerCm);

      // ãƒãƒæ‹¾ã„ç›®
      const gussetPickup = Math.round(heelFlapRows / 2);

      // å‡ºåŠ›ï¼šé“å…·
      $('outYarnName').textContent = yarnGauges[yarnWeight].name;
      const needleMm = needleMmMap[needleSize] || '2.5';
      $('outNeedle').textContent = `${needleSize}å· (${needleMm}mm)`;
      $('outGauge').textContent = `10cm = ${currentGauge.stitches}ç›® Ã— ${currentGauge.rows}æ®µ`;
      $('outGaugeTag').textContent = useCustom ? '(ã‚«ã‚¹ã‚¿ãƒ )' : '';
      $('outSockType').textContent = isUtsubo ? 'ã‚¦ãƒ„ãƒœã‚½ãƒƒã‚¯ã‚¹ï¼ˆç­’å‹ï¼‰' : 'æ¨™æº–';

      // ã‚¹ãƒ†ãƒƒãƒ—
      const steps = [];

      if (method === 'toe'){
        steps.push(`
          <div class="box b-orange">
            <h3 class="accent-orange">1. ã¤ã¾å…ˆ</h3>
            <p>ä½œã‚Šç›®ï¼š<span class="big accent-orange">${toeCastOnStart}ç›®</span>ç¨‹åº¦ã‹ã‚‰é–‹å§‹</p>
            <p>å¢—ã—ç›®æ®µæ•°ï¼šç´„<span class="big accent-orange">${toeRows}æ®µ</span></p>
            <p class="muted">â€»ç›®æ¨™ï¼š${totalSt}ç›®</p>
          </div>
        `);

        steps.push(`
          <div class="box b-green">
            <h3 class="accent-green">2. è¶³ã®ç”²</h3>
            <p>ç›®æ•°ï¼š<span class="big accent-green">${totalSt}ç›®</span></p>
            <p>æ®µæ•°ï¼šç´„<span class="big accent-green">${footRows}æ®µ</span>ï¼ˆç´„<span class="accent-green" style="font-weight:900; font-size:18px;">${footCm}cm</span>ï¼‰</p>
          </div>
        `);

        if (!isUtsubo){
          steps.push(`
            <div class="box b-pink">
              <h3 class="accent-pink">3. ã‹ã‹ã¨</h3>
              <p>ã‹ã‹ã¨ç›®æ•°ï¼š<span class="big accent-pink">${heelStitches}ç›®</span></p>
              <p>ã‚·ãƒ§ãƒ¼ãƒˆãƒ­ã‚¦ï¼šç´„<span class="big accent-pink">${heelTurnRows}æ®µ</span></p>
            </div>
          `);
        } else {
          steps.push(`
            <div class="box b-pink">
              <h3 class="accent-pink">3. ã‹ã‹ã¨ï¼ˆã‚¦ãƒ„ãƒœå‹ï¼‰</h3>
              <p>ã‹ã‹ã¨éƒ¨åˆ†ï¼š<span class="big accent-pink">ãã®ã¾ã¾ç­’çŠ¶ã«ç·¨ã‚€</span></p>
              <p class="muted">â€»ã‚¦ãƒ„ãƒœã‚½ãƒƒã‚¯ã‚¹ã¯ã‹ã‹ã¨ã®æˆå½¢ãªã—</p>
            </div>
          `);
        }

        steps.push(`
          <div class="box b-purple">
            <h3 class="accent-purple">4. é•·ã•ï¼ˆå±¥ãå£ï¼‰</h3>
            <p>ç›®æ•°ï¼š<span class="big accent-purple">${totalSt}ç›®</span></p>
            <p>æ®µæ•°ï¼šç´„<span class="big accent-purple">${cuffRows}æ®µ</span>ï¼ˆç´„<span class="accent-purple" style="font-weight:900; font-size:18px;">${cuffCm}cm</span>ï¼‰</p>
            <p class="muted">â€»ã‚´ãƒ ç·¨ã¿ãªã©ã§ç·¨ã‚“ã§ä¼ã›æ­¢ã‚</p>
          </div>
        `);

      } else {
        steps.push(`
          <div class="box b-purple">
            <h3 class="accent-purple">1. é•·ã•ï¼ˆå±¥ãå£ï¼‰ãƒ»è¶³é¦–</h3>
            <p>ä½œã‚Šç›®ï¼š<span class="big accent-purple">${totalSt}ç›®</span></p>
            <p>æ®µæ•°ï¼šç´„<span class="big accent-purple">${cuffRows}æ®µ</span>ï¼ˆç´„<span class="accent-purple" style="font-weight:900; font-size:18px;">${cuffCm}cm</span>ï¼‰</p>
            <p class="muted">â€»ã‚´ãƒ ç·¨ã¿ãªã©ã§ç·¨ã¿ã¾ã™</p>
          </div>
        `);

        if (!isUtsubo){
          steps.push(`
            <div class="box b-pink">
              <h3 class="accent-pink">2. ã‹ã‹ã¨</h3>
              <p>ã‹ã‹ã¨ãƒ•ãƒ©ãƒƒãƒ—ï¼š<span class="big accent-pink">${heelStitches}ç›®</span> Ã— <span class="big accent-pink">${heelFlapRows}æ®µ</span></p>
              <p>ã‹ã‹ã¨ã‚¿ãƒ¼ãƒ³ï¼šç´„<span class="accent-pink" style="font-weight:900; font-size:18px;">${heelTurnRows}æ®µ</span></p>
              <p class="muted">â€»å¾€å¾©ç·¨ã¿ã§ç·¨ã¿ã¾ã™</p>
            </div>
          `);

          steps.push(`
            <div class="box b-blue">
              <h3 class="accent-blue">3. ãƒãƒï¼ˆã‚¬ã‚¼ãƒƒãƒˆï¼‰</h3>
              <p>ä¸¡ç«¯ã‹ã‚‰æ‹¾ã„ç›®ï¼šå„<span class="big accent-blue">${gussetPickup}ç›®</span></p>
              <p class="muted">â€»æ¸›ã‚‰ã—ç›®ã‚’ã—ãªãŒã‚‰å…ƒã®ç›®æ•°ã«æˆ»ã—ã¾ã™</p>
            </div>
          `);
        } else {
          steps.push(`
            <div class="box b-pink">
              <h3 class="accent-pink">2. ã‹ã‹ã¨ï¼ˆã‚¦ãƒ„ãƒœå‹ï¼‰</h3>
              <p>ã‹ã‹ã¨éƒ¨åˆ†ï¼š<span class="big accent-pink">ãã®ã¾ã¾ç­’çŠ¶ã«ç·¨ã‚€</span></p>
              <p class="muted">â€»ã‚¦ãƒ„ãƒœã‚½ãƒƒã‚¯ã‚¹ã¯ã‹ã‹ã¨ã®æˆå½¢ãªã—</p>
            </div>
          `);
        }

        const stepNoFoot = isUtsubo ? '3' : '4';
        const stepNoToe = isUtsubo ? '4' : '5';

        steps.push(`
          <div class="box b-green">
            <h3 class="accent-green">${stepNoFoot}. è¶³ã®ç”²</h3>
            <p>ç›®æ•°ï¼š<span class="big accent-green">${totalSt}ç›®</span></p>
            <p>æ®µæ•°ï¼šç´„<span class="big accent-green">${footRows}æ®µ</span>ï¼ˆç´„<span class="accent-green" style="font-weight:900; font-size:18px;">${footCm}cm</span>ï¼‰</p>
          </div>
        `);

        steps.push(`
          <div class="box b-orange">
            <h3 class="accent-orange">${stepNoToe}. ã¤ã¾å…ˆ</h3>
            <p>æ¸›ã‚‰ã—ç›®æ®µæ•°ï¼šç´„<span class="big accent-orange">${toeRows}æ®µ</span></p>
            <p class="muted">â€»ä¸¡ç«¯ã§æ¸›ã‚‰ã—ç›®ã‚’ã—ã¦é–‰ã˜ã¾ã™</p>
          </div>
        `);
      }

      $('outSteps').innerHTML = `<div class="space">${steps.join('')}</div>`;

      // çµæœã‚«ãƒ¼ãƒ‰ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      $('resultCard').scrollIntoView({behavior:'smooth'});
    }

    // init
    setHints();
    compute();

    $('useCustomGauge').addEventListener('change', () => {
      setHints();
    });

    // yarn change updates hints
    $('yarnWeight').addEventListener('change', setHints);

    $('calcBtn').addEventListener('click', compute);

    // Enterã‚­ãƒ¼ã§ã‚‚è¨ˆç®—
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        // å…¥åŠ›ä¸­ã«Enterã§è¨ˆç®—ã—ãŸã„æ™‚ç”¨
        compute();
      }
    });
  </script>
</body>
</html>
